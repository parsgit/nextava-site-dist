import{_}from"./MyInput-CUXC8jwy.js";import{d,r as f,m as w,A as x,c as a,a as l,F as V,f as B,h as g,P as y,C as N,o as i,t as v}from"./index-8JBQnCp2.js";import{_ as $}from"./List-mGP7ih9Z.js";const A={class:"mt-12 bg-base-200 rounded-xl shadow p-4"},D={class:"breadcrumbs text-sm p-4"},E=["onClick"],M={key:1},O={class:"bg-base-200 mt-4 p-4 rounded-b-xl w-full"},P={class:"mt-2 flex flex-wrap items-end gap-4"},U={__name:"CategoryManagerView",setup(S){const c={id:0,title:"",type:"",link:""};d({...c});const n=d({...c});d([]);const r=f("0"),u=d([]),p=f([]),b=()=>{n.parent=r.value,y("category/save",{category:n}).then(e=>{e.ok&&(N("Success","success"),Object.assign(n,c),o())})},k=e=>{y("category/remove",{id:e.id}).then(t=>{o()})},C=(e,t)=>{t.id=="edit"?Object.assign(n,e):t.id=="open"&&(console.log(e),m(e))},o=()=>{y("category/list-by-parent",{parent:r.value}).then(e=>{e.ok&&(u.splice(0),e.list.forEach(t=>u.push(t)),p.value=e.tree)})},m=(e,t)=>{console.log(e),r.value=e.id,o()};return w(()=>{o()}),x(r,e=>{o()}),(e,t)=>(i(),a("div",null,[l("div",A,[l("div",null,[l("div",D,[l("ul",null,[l("li",null,[l("a",{onClick:t[0]||(t[0]=s=>m({id:0}))},"Main")]),(i(!0),a(V,null,B(p.value,(s,h)=>(i(),a("li",{key:s.id},[h+1<p.value.length?(i(),a("a",{key:0,onClick:T=>m(s)},v(s.title),9,E)):(i(),a("span",M,v(s.title),1))]))),128))])])]),l("div",null,[g($,{class:"mt-4",list:u,fields:["title","link","type"],btns:[{title:"Open",id:"open",class:"btn-info"},{title:"Edit",id:"edit"},{title:"Delete",id:"delete",class:"btn-error"}],"delete-action":!0,onDelete:k,onBtnAction:C},null,8,["list"])]),l("div",O,[t[3]||(t[3]=l("h3",{class:"font-bold text-xl"},"Create New Category",-1)),l("div",P,[g(_,{modelValue:n.title,"onUpdate:modelValue":t[1]||(t[1]=s=>n.title=s),title:"Title"},null,8,["modelValue"]),g(_,{modelValue:n.link,"onUpdate:modelValue":t[2]||(t[2]=s=>n.link=s),title:"Link"},null,8,["modelValue"]),l("button",{onClick:b,class:"btn btn-primary"},"Save")])])])]))}};export{U as default};
