import{c as a,o as l,a as o,q as k,r as i,s as R,C as V,e as d,t as h,w as A,x as F,y as b,I,A as M,U as W}from"./index-DjDHUfAE.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={},D={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"};function P(s,m){return l(),a("svg",D,m[0]||(m[0]=[o("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z","clip-rule":"evenodd"},null,-1)]))}const Z=$(N,[["render",P]]),j={class:"flex flex-col items-center bg-base-300 p-4 rounded-xl shadow shadow-primary"},E={key:0,class:"text-lg font-bold"},L={class:"mt-2"},O={key:0},T=["src"],q=["src"],z={class:"text-sm py-1 px-1 bg-gray-100/50 text-green-600/80"},H={key:0,class:"progress"},J=["value"],G={class:"flex gap-6 mt-2"},K=["accept"],Y={__name:"FileUploader",props:k({accept:{default:".png, .jpg"},modelResult:{default:"path"},btnTitle:{type:String,default:"Select Image"},maxW:{type:Number,default:200},title:{type:String,default:"Upload Image"},uploadUrl:{default:""},uploadParams:{default:{}},uploadBtn:{default:!0},imageBox:{default:!0}},{modelValue:{},modelModifiers:{}}),emits:k("change",["update:modelValue"]),setup(s,{emit:m}){const n=s,g=i(null),v=i(null),r=m,p=i(0),f=i(!1),w=i("image"),x=i(!1),t=R(s,"modelValue"),S=e=>{x.value=!0;const u=e.target.files[0];if(["jpg","png"].indexOf(y(u.name))>-1){const c=new FileReader;c.readAsDataURL(u),c.onload=_=>{v.value=_.target.result}}r("change",u)},B=()=>{r("remove",t.value),v.value=null,x.value=!1,t.value=""},U=()=>{f.value=!0,W(n.uploadUrl,g.value.files[0],n.uploadParams,e=>{p.value=e,r("progress",e)},e=>{e=JSON.parse(e),f.value=!1,e.ok?(t.value=e[n.modelResult],console.log("model.value",e[n.modelResult],n.modelResult),r("complete",e)):r("error",e.message)},e=>{f.value=!1,r("error",e)})},y=e=>e.split(".").pop(),C=()=>M.server+t.value;return V(t,e=>{e!=null&&e.length&&(w.value=y(e))}),(e,u)=>{var c;return l(),a("div",j,[o("div",null,[s.title?(l(),a("h3",E,h(s.title),1)):d("",!0)]),o("div",L,[s.imageBox?(l(),a("div",O,[v.value&&!t.value?(l(),a("img",{key:0,style:b(s.maxW?`max-width:${s.maxW}px`:""),class:"mx-auto w-full",src:v.value,alt:""},null,12,T)):(c=t.value)!=null&&c.length?(l(),a("img",{key:1,style:b(s.maxW?`max-width:${s.maxW}px`:""),class:"mx-auto w-full",src:C(),alt:""},null,12,q)):(l(),F(Z,{key:2,class:"text-primary w-full"}))])):d("",!0),o("div",null,[o("p",z,h(t.value),1)]),A(o("div",null,[p.value==0?(l(),a("progress",H)):(l(),a("progress",{key:1,class:"progress progress-primary",value:p.value,max:"100"},null,8,J))],512),[[I,f.value]])]),o("div",G,[o("input",{readonly:"",accept:n.accept,onChange:S,class:"hidden",ref_key:"input_file",ref:g,type:"file"},null,40,K),t.value?d("",!0):(l(),a("button",{key:0,onClick:u[0]||(u[0]=_=>g.value.click()),class:"btn btn-secondary"},h(n.btnTitle),1)),!t.value&&x.value?(l(),a("button",{key:1,onClick:U,class:"btn btn-primary"},"Upload")):d("",!0),t.value?(l(),a("button",{key:2,onClick:B,class:"btn btn-warning"},"Remove")):d("",!0)])])}}};export{Z as I,Y as _};
